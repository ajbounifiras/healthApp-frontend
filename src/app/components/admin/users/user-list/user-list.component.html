<div class="users-page">
  <div class="container">
    <div class="page-header">
      <h1>Gestion des utilisateurs</h1>
      <div class="header-actions">
        <button class="btn btn-primary" (click)="createUser()">
          â• CrÃ©er un utilisateur
        </button>
        <a routerLink="/admin" class="btn btn-secondary">
          â† Retour au tableau de bord
        </a>
      </div>
    </div>

    <!-- Filtres et recherche -->
    <div class="filters-section">
      <div class="filter-group">
        <label for="filterRole">Filtrer par rÃ´le:</label>
        <select 
          id="filterRole" 
          [(ngModel)]="filterRole" 
          (change)="onFilterChange()" 
          class="form-control">
          <option value="all">Tous les rÃ´les</option>
          <option value="ADMIN">Administrateurs</option>
          <option value="DOCTOR">Docteurs</option>
          <option value="SECRETARY">SecrÃ©taires</option>
          <option value="PATIENT">Patients</option>
        </select>
      </div>

      <div class="filter-group">
        <label for="searchTerm">Rechercher:</label>
        <input 
          type="text" 
          id="searchTerm"
          [(ngModel)]="searchTerm"
          (input)="onFilterChange()"
          class="form-control"
          placeholder="Nom, prÃ©nom ou email...">
      </div>

      <div class="filter-results">
        <strong>{{ filteredUsers.length }}</strong> utilisateur(s) trouvÃ©(s)
      </div>
    </div>

    <!-- Messages -->
    <div *ngIf="loading" class="loading">Chargement des utilisateurs...</div>

    <div *ngIf="errorMessage" class="alert alert-danger">
      {{ errorMessage }}
    </div>

    <div *ngIf="successMessage" class="alert alert-success">
      {{ successMessage }}
    </div>

    <!-- Tableau des utilisateurs -->
    <div class="card" *ngIf="!loading">
      <div *ngIf="users.length === 0" class="empty-state">
        <div class="empty-state-icon">ğŸ‘¥</div>
        <h3>Aucun utilisateur</h3>
        <p>Commencez par crÃ©er un utilisateur</p>
        <button class="btn btn-primary" (click)="createUser()">
          â• CrÃ©er le premier utilisateur
        </button>
      </div>

      <table *ngIf="filteredUsers.length > 0">
        <thead>
          <tr>
            <th>ID</th>
            <th>Nom complet</th>
            <th>Email</th>
            <th>TÃ©lÃ©phone</th>
            <th>RÃ´le</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let user of filteredUsers">
            <td>{{ user.id }}</td>
            <td>
              <strong>{{ user.firstName }} {{ user.lastName }}</strong>
            </td>
            <td>{{ user.email }}</td>
            <td>{{ user.phone }}</td>
            <td>
              <span [class]="'badge ' + getRoleBadgeClass(user.role)">
                {{ getRoleLabel(user.role) }}
              </span>
            </td>
            <td>
              <div class="action-buttons">
                <button 
                  class="btn btn-sm btn-info"
                  (click)="editUser(user.id!)">
                  âœï¸ Modifier
                </button>
                <button 
                  class="btn btn-sm btn-danger"
                  (click)="deleteUser(user)">
                  ğŸ—‘ï¸ Supprimer
                </button>
              </div>
            </td>
          </tr>
        </tbody>
      </table>

      <div *ngIf="users.length > 0 && filteredUsers.length === 0" class="empty-state">
        <div class="empty-state-icon">ğŸ”</div>
        <h3>Aucun rÃ©sultat</h3>
        <p>Aucun utilisateur ne correspond aux filtres sÃ©lectionnÃ©s</p>
      </div>
    </div>
  </div>
</div>